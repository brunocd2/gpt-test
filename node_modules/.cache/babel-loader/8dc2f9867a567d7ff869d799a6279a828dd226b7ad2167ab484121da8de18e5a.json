{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Rox/Documents/GitHub/gpt-test-steticLay/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Rox/Documents/GitHub/gpt-test-steticLay/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{CardsArea,ChartsRow,DashboardFilterArea,DashboardHeader,DashboardWrapper,MetricProducts}from\"./styles\";import{GlobalContext}from'../../contexts/global';import Card from'./components/Card';import InputWithIcon from'../../components/InputWithIcon';import DefaultDashboardContainer from\"./components/DefaultDashboardContainer\";import BarCharts from\"./components/BarChart\";import PieChart from\"./components/PieChart\";import SearchIcon from'../../assets/icons/search.png';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function Dashboard(){var _useContext=useContext(GlobalContext),user=_useContext.user,session=_useContext.session,products=_useContext.products,partners=_useContext.partners,categories=_useContext.categories;var today=new Date();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),importsToday=_useState2[0],setImportsToday=_useState2[1];var _useState3=useState('Categoria'),_useState4=_slicedToArray(_useState3,2),category=_useState4[0],setCategory=_useState4[1];var _useState5=useState({thisMonth:[],lastMonth:[],diff:0.0,lastMonthDate:''}),_useState6=_slicedToArray(_useState5,2),imports=_useState6[0],setImports=_useState6[1];var _useState7=useState({thisMonth:[],lastMonth:[],diff:0.0}),_useState8=_slicedToArray(_useState7,2),singleProducts=_useState8[0],setSingleProducts=_useState8[1];var _useState9=useState({thisMonth:[],lastMonth:[],diff:0.0}),_useState10=_slicedToArray(_useState9,2),clients=_useState10[0],setClients=_useState10[1];var _useState11=useState([[\"Parceiro\",\"Vendas\"],[\"Hippo\",0],[\"Zaffari\",0],[\"Super pão\",0]]),_useState12=_slicedToArray(_useState11,2),pieChartData=_useState12[0],setPieChartData=_useState12[1];var _useState13=useState([['','Última Entrada (un)','Última Saída (un)'],['Set',0,0],['Out',0,0],['Nov',0,0],['Dez',0,0],['Jan',0,0],['Fev',0,0]]),_useState14=_slicedToArray(_useState13,2),barChartData=_useState14[0],setBarChartData=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),dates=_useState16[0],setDates=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),initialFilter=_useState18[0],setInitialFilter=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),finalFilter=_useState20[0],setFinalFilter=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),search=_useState22[0],setSearch=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),searchResult=_useState24[0],setSearchResult=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),selectedProduct=_useState26[0],setSelectedProduct=_useState26[1];var metricsHeader=['Parceiros','Estoque','Qtd. Últ-Entrada','Qtd. Últ-Saída'];var categoriesOptions=['Categoria'].concat(_toConsumableArray(categories));var _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),metricsBody=_useState28[0],setMetricsBody=_useState28[1];function getCardsInfos(initialDate,finalDate){var singleProducts=[];var singleProductsLastMonth=[];var clients=[];var clientsLastMonth=[];var importedProducts=[];var importedProductsLastMonth=[];var firstDayMonth=new Date().setDate(1);var productsLastMonth=products.filter(function(product){return new Date(product.created_at).getTime()<firstDayMonth;});if(initialDate&&finalDate){importedProducts=products.filter(function(product){var created=new Date(product.created_at).getTime();var updated=new Date(product.updated_at).getTime();var match=updated||created;return match>=initialDate.getTime()&&match<=finalDate.getTime();});importedProductsLastMonth=products.filter(function(product){var created=new Date(product.created_at).getTime();var updated=new Date(product.updated_at).getTime();var match=updated||created;finalDate.setDate(1);return match>=initialDate.getTime()&&match<finalDate.getTime();});setImports(function(){return{thisMonth:importedProducts,lastMonth:importedProductsLastMonth,diff:(importedProducts.length-importedProductsLastMonth.length)/importedProductsLastMonth.length*100};});finalDate.setMonth(finalDate.getMonth()+1);finalDate.setDate(finalDate.getDate()-1);products.forEach(function(product){var codigo_acesso_principal=product.codigo_acesso_principal,parceiro=product.parceiro,created_at=product.created_at;var haveGeneral=singleProducts.some(function(product){return product.codigo_acesso_principal===codigo_acesso_principal;});var haveClient=singleProducts.some(function(product){return product.parceiro===parceiro;});var matchTime=new Date(created_at)>=initialDate.getTime()&&new Date(created_at)<=finalDate.getTime();if(!haveGeneral&&matchTime){singleProducts.push(product);}else{}if(!haveClient&&matchTime){clients.push(parceiro);}});productsLastMonth.forEach(function(product){var codigo_acesso_principal=product.codigo_acesso_principal,parceiro=product.parceiro,created_at=product.created_at;var haveLastMonth=singleProductsLastMonth.some(function(product){return product.codigo_acesso_principal===codigo_acesso_principal;});var haveClient=singleProductsLastMonth.some(function(product){return product.parceiro===parceiro;});finalDate.setDate(1);var matchTime=new Date(created_at)>=initialDate.getTime()&&new Date(created_at)<finalDate.getTime();if(!haveLastMonth&&matchTime){singleProductsLastMonth.push(product);}if(!haveClient&&matchTime){clientsLastMonth.push(parceiro);}});setClients(function(){return{thisMonth:clients,lastMonth:clientsLastMonth,diff:(clients.length-clientsLastMonth.length)/clientsLastMonth.length*100};});setSingleProducts(function(){return{thisMonth:singleProducts,lastMonth:singleProductsLastMonth,diff:(singleProducts.length-singleProductsLastMonth.length)/singleProductsLastMonth.length*100};});}var imports=products.filter(function(product){return new Date(product.updated_at).toLocaleDateString()===today.toLocaleDateString();});setImportsToday(imports);}function getBarChartInfos(initialDate,finalDate){var result=[];var filteredProducts=[];// const data = [];\nvar currentDate=new Date(initialDate);while(currentDate<=finalDate){var month=String(currentDate.getMonth()+1).padStart(2,'0');var year=currentDate.getFullYear();var dateString=\"\".concat(month,\"/\").concat(year);var dateValue=new Date(currentDate);result.push({dateString:dateString,dateValue:dateValue});currentDate.setMonth(currentDate.getMonth()+1);}finalDate.setMonth(finalDate.getMonth()+1);finalDate.setDate(finalDate.getDate()-1);var filtered=result.map(function(month){filteredProducts=products.filter(function(product){var date=new Date(product.created_at).getTime();var finalMonth=new Date(month.dateValue);finalMonth.setMonth(month.dateValue.getMonth()+1);if(category==='Categoria'){return date>=month.dateValue.getTime()&&date<finalMonth.getTime();}else{return category===product.categoria&&date>=month.dateValue.getTime()&&date<finalMonth.getTime();}});return{month:month,array:filteredProducts};});var data=filtered.map(function(element){var entry=0;var exit=0;element.array.forEach(function(product){entry=entry+parseInt(product.qtd_ult_compra);exit=exit+parseInt(product.qtd_ult_saida);});return[element.month.dateString,entry,exit];});setBarChartData([['','Última Entrada (un)','Última Saída (un)']].concat(_toConsumableArray(data)));}function getPieChartInfos(initialDate,finalDate){var data=partners.map(function(partner){var total=0;var productsPartner=products.filter(function(product){var date=new Date(product.created_at).getTime();if(initialDate&&finalDate){if(category==='Categoria'){return product.parceiro===partner&&date>=initialDate.getTime()&&date<=finalDate.getTime();}else{return category===product.categoria&&product.parceiro===partner&&date>=initialDate.getTime()&&date<=finalDate.getTime();}}else{return product.parceiro===partner;}});productsPartner.forEach(function(product){if(product.qtd_ult_saida){total=total+parseInt(product.qtd_ult_saida);}});return[partner,total];});setPieChartData([['Parceiro','Entradas']].concat(_toConsumableArray(data)));}function handleSearch(){setSelectedProduct(function(){return products.find(function(product){return product.descricao_produto===search;});});var initialDateArray=initialFilter.split('/');var finalDateArray=finalFilter.split('/');var initialDate=new Date(initialDateArray[1],parseInt(initialDateArray[0])-1,1);var finalDate=new Date(finalDateArray[1],parseInt(finalDateArray[0])-1);finalDate.setMonth(finalDate.getMonth()+1);finalDate.setDate(finalDate.getDate()-1);getBarChartInfos(initialDate,finalDate);}function getMetrics(initialDate,finalDate){var metrics=partners.map(function(partner){var filtered=products.filter(function(product){var categoria=product.categoria,created_at=product.created_at,updated_at=product.updated_at,parceiro=product.parceiro;var created=new Date(created_at).getTime();var updated=new Date(updated_at).getTime();var match=updated||created;if(category==='Categoria'){return partner===parceiro&&match>=initialDate.getTime()&&match<=finalDate.getTime();}else{return category===categoria&&partner===parceiro&&match>=initialDate.getTime()&&match<=finalDate.getTime();}});var result=[partner];var stock=0;var amountLastExit=0;var amountEntry=0;filtered.forEach(function(product){var qtd_ult_compra=product.qtd_ult_compra,qtd_ult_saida=product.qtd_ult_saida,estq_disponivel=product.estq_disponivel;if(estq_disponivel){stock=stock+Math.trunc(Number(estq_disponivel));}if(qtd_ult_compra){amountEntry=amountEntry+Math.trunc(Number(qtd_ult_compra));}if(qtd_ult_saida){amountLastExit=amountLastExit+Math.trunc(Number(qtd_ult_saida));}});result.push(stock+' un.',amountEntry+' un.',amountLastExit+' un.');return result;});setMetricsBody(metrics);}useEffect(function(){setDates(function(){var months=[];months.push(\"\".concat((today.getMonth()+1).toString().padStart(2,'0'),\"/\").concat(today.getFullYear()));for(var i=1;i<=4;i++){var pastData=new Date();pastData.setMonth(today.getMonth()-i);months.push(\"\".concat((pastData.getMonth()+1).toString().padStart(2,'0'),\"/\").concat(pastData.getFullYear()));}setInitialFilter(months[4]);setFinalFilter(months[0]);return months;});// getPieChartInfos();\n// getCardsInfos();\n// getBarChartInfos();\n},[]);useEffect(function(){var initialDateArray=initialFilter.split('/');var finalDateArray=finalFilter.split('/');var initialDate=new Date(initialDateArray[1],parseInt(initialDateArray[0])-1,1);var finalDate=new Date(finalDateArray[1],parseInt(finalDateArray[0])-1);finalDate.setMonth(finalDate.getMonth()+1);finalDate.setDate(finalDate.getDate()-1);getPieChartInfos(initialDate,finalDate);getCardsInfos(initialDate,finalDate);getBarChartInfos(initialDate,finalDate);getMetrics(initialDate,finalDate);},[initialFilter,finalFilter,category]);useEffect(function(){selectedProduct&&setSelectedProduct(null);setSearchResult(function(){return search?products.filter(function(product){return product.descricao_produto.includes(search.toUpperCase());}):[];});},[search]);return/*#__PURE__*/_jsxs(DashboardWrapper,{children:[/*#__PURE__*/_jsxs(DashboardHeader,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Ol\\xE1, \",session.name,\" \",session.last_name]}),/*#__PURE__*/_jsx(\"small\",{children:\"Bem vindo(a) de volta!\"})]}),/*#__PURE__*/_jsx(\"img\",{src:user.avatar,alt:session.name})]}),/*#__PURE__*/_jsx(CardsArea,{children:/*#__PURE__*/_jsx(\"div\",{className:\"cards\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"iframe\",{width:\"120%\",frameborder:\"0\",\"margin-left\":\"-2.5px\",height:\"800px\",src:\"https://brurei-cd2-ai-internal.hf.space/?__theme=dark&__sign=eyJhbGciOiJFZERTQSJ9.eyJzdWIiOiJicnVyZWkvY2QyLWFpLWludGVybmFsIiwiZXhwIjoxNjgyNDUyMzgxLCJpc3MiOiJodWdnaW5nZmFjZS1tb29uIn0.clEm5YVAfdiBRuz7S6w7WOPo5PN0I44-5Mzj8NgQwh4qGLgkfQJ3T1B1mMOgmBp8DSQliT2626ueGd_n1WWdAg\"})})})})]});}","map":{"version":3,"names":["React","useContext","useEffect","useState","CardsArea","ChartsRow","DashboardFilterArea","DashboardHeader","DashboardWrapper","MetricProducts","GlobalContext","Card","InputWithIcon","DefaultDashboardContainer","BarCharts","PieChart","SearchIcon","Dashboard","user","session","products","partners","categories","today","Date","importsToday","setImportsToday","category","setCategory","thisMonth","lastMonth","diff","lastMonthDate","imports","setImports","singleProducts","setSingleProducts","clients","setClients","pieChartData","setPieChartData","barChartData","setBarChartData","dates","setDates","initialFilter","setInitialFilter","finalFilter","setFinalFilter","search","setSearch","searchResult","setSearchResult","selectedProduct","setSelectedProduct","metricsHeader","categoriesOptions","metricsBody","setMetricsBody","getCardsInfos","initialDate","finalDate","singleProductsLastMonth","clientsLastMonth","importedProducts","importedProductsLastMonth","firstDayMonth","setDate","productsLastMonth","filter","product","created_at","getTime","created","updated","updated_at","match","length","setMonth","getMonth","getDate","forEach","codigo_acesso_principal","parceiro","haveGeneral","some","haveClient","matchTime","push","haveLastMonth","toLocaleDateString","getBarChartInfos","result","filteredProducts","currentDate","month","String","padStart","year","getFullYear","dateString","dateValue","filtered","map","date","finalMonth","categoria","array","data","element","entry","exit","parseInt","qtd_ult_compra","qtd_ult_saida","getPieChartInfos","partner","total","productsPartner","handleSearch","find","descricao_produto","initialDateArray","split","finalDateArray","getMetrics","metrics","stock","amountLastExit","amountEntry","estq_disponivel","Math","trunc","Number","months","toString","i","pastData","includes","toUpperCase","name","last_name","avatar"],"sources":["C:/Users/Rox/Documents/GitHub/gpt-test-steticLay/src/pages/Dashboard/index.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport {\r\n  CardsArea,\r\n  ChartsRow,\r\n  DashboardFilterArea,\r\n  DashboardHeader,\r\n  DashboardWrapper,\r\n  MetricProducts\r\n} from \"./styles\";\r\n\r\nimport { GlobalContext } from '../../contexts/global';\r\n\r\nimport Card from './components/Card';\r\nimport InputWithIcon from '../../components/InputWithIcon';\r\nimport DefaultDashboardContainer from \"./components/DefaultDashboardContainer\";\r\nimport BarCharts from \"./components/BarChart\";\r\nimport PieChart from \"./components/PieChart\";\r\n\r\nimport SearchIcon from '../../assets/icons/search.png';\r\n\r\nexport default function Dashboard() {\r\n  const { user, session, products, partners, categories } = useContext(GlobalContext);\r\n  const today = new Date();\r\n  const [importsToday, setImportsToday] = useState([]);\r\n  const [category, setCategory] = useState('Categoria');\r\n  const [imports, setImports] = useState({\r\n    thisMonth: [],\r\n    lastMonth: [],\r\n    diff: 0.0,\r\n    lastMonthDate: ''\r\n  });\r\n  const [singleProducts, setSingleProducts] = useState({\r\n    thisMonth: [],\r\n    lastMonth: [],\r\n    diff: 0.0\r\n  });\r\n  const [clients, setClients] = useState({\r\n    thisMonth: [],\r\n    lastMonth: [],\r\n    diff: 0.0\r\n  })\r\n  const [pieChartData, setPieChartData] = useState([\r\n    [\"Parceiro\", \"Vendas\"],\r\n    [\"Hippo\", 0],\r\n    [\"Zaffari\", 0,],\r\n    [\"Super pão\", 0],\r\n  ]);\r\n  const [barChartData, setBarChartData] = useState([\r\n    ['', 'Última Entrada (un)', 'Última Saída (un)'],\r\n    ['Set', 0, 0],\r\n    ['Out', 0, 0],\r\n    ['Nov', 0, 0],\r\n    ['Dez', 0, 0],\r\n    ['Jan', 0, 0],\r\n    ['Fev', 0, 0],\r\n  ])\r\n  const [dates, setDates] = useState([]);\r\n  const [initialFilter, setInitialFilter] = useState('');\r\n  const [finalFilter, setFinalFilter] = useState('');\r\n  const [search, setSearch] = useState('');\r\n  const [searchResult, setSearchResult] = useState([]);\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n\r\n  const metricsHeader = ['Parceiros', 'Estoque', 'Qtd. Últ-Entrada', 'Qtd. Últ-Saída'];\r\n  const categoriesOptions = ['Categoria', ...categories]\r\n\r\n  const [metricsBody, setMetricsBody] = useState([]);\r\n\r\n  function getCardsInfos(initialDate, finalDate) {\r\n    let singleProducts = [];\r\n    let singleProductsLastMonth = [];\r\n    let clients = [];\r\n    let clientsLastMonth = [];\r\n    let importedProducts = [];\r\n    let importedProductsLastMonth = [];\r\n    const firstDayMonth = new Date().setDate(1);\r\n    let productsLastMonth = products.filter(product =>\r\n      new Date(product.created_at).getTime() < firstDayMonth\r\n    );\r\n\r\n    if (initialDate && finalDate) {\r\n      importedProducts = products.filter(product => {\r\n        const created = new Date(product.created_at).getTime();\r\n        const updated = new Date(product.updated_at).getTime();\r\n        const match = updated || created\r\n        return (\r\n          match >= initialDate.getTime() &&\r\n          match <= finalDate.getTime()\r\n        )\r\n      });\r\n\r\n      importedProductsLastMonth = products.filter(product => {\r\n        const created = new Date(product.created_at).getTime();\r\n        const updated = new Date(product.updated_at).getTime();\r\n        const match = updated || created\r\n        finalDate.setDate(1);\r\n        return (\r\n          match >= initialDate.getTime() &&\r\n          match < finalDate.getTime()\r\n        )\r\n      });\r\n\r\n      setImports(() => ({\r\n        thisMonth: importedProducts,\r\n        lastMonth: importedProductsLastMonth,\r\n        diff: (importedProducts.length - importedProductsLastMonth.length) / importedProductsLastMonth.length * 100\r\n      }));\r\n\r\n\r\n      finalDate.setMonth(finalDate.getMonth() + 1);\r\n      finalDate.setDate(finalDate.getDate() - 1);\r\n\r\n      products.forEach(product => {\r\n        const { codigo_acesso_principal, parceiro, created_at } = product;\r\n\r\n        const haveGeneral = singleProducts.some(product =>\r\n          product.codigo_acesso_principal === codigo_acesso_principal\r\n        );\r\n        const haveClient = singleProducts.some(product =>\r\n          product.parceiro === parceiro\r\n        );\r\n\r\n        const matchTime = new Date(created_at) >= initialDate.getTime() && new Date(created_at) <= finalDate.getTime();\r\n        if (!haveGeneral && matchTime) {\r\n          singleProducts.push(product);\r\n        } else {\r\n        }\r\n        if (!haveClient && matchTime) {\r\n          clients.push(parceiro);\r\n        }\r\n      });\r\n\r\n      productsLastMonth.forEach(product => {\r\n        const { codigo_acesso_principal, parceiro, created_at } = product;\r\n        const haveLastMonth = singleProductsLastMonth.some(product =>\r\n          product.codigo_acesso_principal === codigo_acesso_principal\r\n        );\r\n        const haveClient = singleProductsLastMonth.some(product =>\r\n          product.parceiro === parceiro\r\n        );\r\n        finalDate.setDate(1);\r\n        const matchTime = new Date(created_at) >= initialDate.getTime() && new Date(created_at) < finalDate.getTime();\r\n        if (!haveLastMonth && matchTime) {\r\n          singleProductsLastMonth.push(product);\r\n        }\r\n        if (!haveClient && matchTime) {\r\n          clientsLastMonth.push(parceiro);\r\n        }\r\n      });\r\n\r\n      setClients(() => ({\r\n        thisMonth: clients,\r\n        lastMonth: clientsLastMonth,\r\n        diff: (clients.length - clientsLastMonth.length) / clientsLastMonth.length * 100\r\n      }));\r\n\r\n      setSingleProducts(() => ({\r\n        thisMonth: singleProducts,\r\n        lastMonth: singleProductsLastMonth,\r\n        diff: (singleProducts.length - singleProductsLastMonth.length) / singleProductsLastMonth.length * 100\r\n      }));\r\n    }\r\n\r\n    const imports = products.filter(product => {\r\n      return new Date(product.updated_at).toLocaleDateString() === today.toLocaleDateString();\r\n    });\r\n    setImportsToday(imports);\r\n  }\r\n\r\n  function getBarChartInfos(initialDate, finalDate) {\r\n    let result = [];\r\n    let filteredProducts = [];\r\n    // const data = [];\r\n\r\n    let currentDate = new Date(initialDate);\r\n    while (currentDate <= finalDate) {\r\n      const month = String(currentDate.getMonth() + 1).padStart(2, '0');\r\n      const year = currentDate.getFullYear();\r\n      const dateString = `${month}/${year}`;\r\n      const dateValue = new Date(currentDate);\r\n      result.push({ dateString, dateValue });\r\n      currentDate.setMonth(currentDate.getMonth() + 1);\r\n    }\r\n\r\n    finalDate.setMonth(finalDate.getMonth() + 1);\r\n    finalDate.setDate(finalDate.getDate() - 1);\r\n\r\n    const filtered = result.map(month => {\r\n      filteredProducts = products.filter(product => {\r\n        const date = new Date(product.created_at).getTime();\r\n        let finalMonth = new Date(month.dateValue);\r\n        finalMonth.setMonth(month.dateValue.getMonth() + 1);\r\n\r\n        if (category === 'Categoria') {\r\n          return (\r\n            date >= month.dateValue.getTime() &&\r\n            date < finalMonth.getTime()\r\n          )\r\n        } else {\r\n          return (\r\n            category === product.categoria &&\r\n            date >= month.dateValue.getTime() &&\r\n            date < finalMonth.getTime()\r\n          )\r\n        }\r\n      });\r\n      return ({\r\n        month,\r\n        array: filteredProducts,\r\n      })\r\n    })\r\n    const data = filtered.map(element => {\r\n      let entry = 0;\r\n      let exit = 0;\r\n      element.array.forEach(product => {\r\n        entry = entry + parseInt(product.qtd_ult_compra);\r\n        exit = exit + parseInt(product.qtd_ult_saida);\r\n      })\r\n      return ([\r\n        element.month.dateString,\r\n        entry,\r\n        exit,\r\n      ]\r\n      )\r\n    })\r\n    setBarChartData([\r\n      ['', 'Última Entrada (un)', 'Última Saída (un)'],\r\n      ...data\r\n    ])\r\n  }\r\n\r\n  function getPieChartInfos(initialDate, finalDate) {\r\n    const data = partners.map(partner => {\r\n      let total = 0;\r\n      const productsPartner = products.filter(product => {\r\n        const date = new Date(product.created_at).getTime();\r\n        if (initialDate && finalDate) {\r\n          if (category === 'Categoria') {\r\n            return (\r\n              product.parceiro === partner &&\r\n              date >= initialDate.getTime() &&\r\n              date <= finalDate.getTime()\r\n            )\r\n          } else {\r\n            return (\r\n              category === product.categoria &&\r\n              product.parceiro === partner &&\r\n              date >= initialDate.getTime() &&\r\n              date <= finalDate.getTime()\r\n            )\r\n          }\r\n\r\n        } else {\r\n          return product.parceiro === partner\r\n        }\r\n      });\r\n      productsPartner.forEach(product => {\r\n        if (product.qtd_ult_saida) {\r\n          total = total + parseInt(product.qtd_ult_saida);\r\n        }\r\n      });\r\n      return [partner, total]\r\n    })\r\n    setPieChartData([\r\n      ['Parceiro', 'Entradas'],\r\n      ...data\r\n    ])\r\n  }\r\n\r\n  function handleSearch() {\r\n    setSelectedProduct(() =>\r\n      products.find(product => product.descricao_produto === search)\r\n    );\r\n    const initialDateArray = initialFilter.split('/');\r\n    const finalDateArray = finalFilter.split('/');\r\n    const initialDate = new Date(initialDateArray[1], parseInt(initialDateArray[0]) - 1, 1);\r\n    let finalDate = new Date(finalDateArray[1], parseInt(finalDateArray[0]) - 1);\r\n    finalDate.setMonth(finalDate.getMonth() + 1);\r\n    finalDate.setDate(finalDate.getDate() - 1);\r\n\r\n    getBarChartInfos(initialDate, finalDate);\r\n  }\r\n\r\n  function getMetrics(initialDate, finalDate) {\r\n    const metrics = partners.map(partner => {\r\n      const filtered = products.filter(product => {\r\n        const { categoria, created_at, updated_at, parceiro } = product;\r\n        const created = new Date(created_at).getTime();\r\n        const updated = new Date(updated_at).getTime();\r\n        const match = updated || created\r\n        if (category === 'Categoria') {\r\n          return (\r\n            partner === parceiro &&\r\n            match >= initialDate.getTime() &&\r\n            match <= finalDate.getTime()\r\n          )\r\n        } else {\r\n          return (\r\n            category === categoria &&\r\n            partner === parceiro &&\r\n            match >= initialDate.getTime() &&\r\n            match <= finalDate.getTime()\r\n          )\r\n        }\r\n      })\r\n      let result = [partner];\r\n      let stock = 0;\r\n      let amountLastExit = 0;\r\n      let amountEntry = 0;\r\n      filtered.forEach(product => {\r\n        const { qtd_ult_compra, qtd_ult_saida, estq_disponivel } = product;\r\n        if (estq_disponivel) {\r\n          stock = stock + Math.trunc(Number(estq_disponivel));\r\n        }\r\n        if (qtd_ult_compra) {\r\n          amountEntry = amountEntry + Math.trunc(Number(qtd_ult_compra));\r\n        }\r\n        if (qtd_ult_saida) {\r\n          amountLastExit = amountLastExit + Math.trunc(Number(qtd_ult_saida));\r\n        }\r\n      })\r\n      result.push(stock + ' un.', amountEntry + ' un.', amountLastExit + ' un.');\r\n      return result\r\n    });\r\n    setMetricsBody(metrics);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setDates(() => {\r\n      let months = [];\r\n      months.push(`${(today.getMonth() + 1).toString().padStart(2, '0')}/${today.getFullYear()}`);\r\n      for (let i = 1; i <= 4; i++) {\r\n        const pastData = new Date();\r\n        pastData.setMonth(today.getMonth() - i);\r\n        months.push(`${(pastData.getMonth() + 1).toString().padStart(2, '0')}/${pastData.getFullYear()}`);\r\n      }\r\n      setInitialFilter(months[4]);\r\n      setFinalFilter(months[0]);\r\n      return months;\r\n    })\r\n    // getPieChartInfos();\r\n    // getCardsInfos();\r\n    // getBarChartInfos();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const initialDateArray = initialFilter.split('/');\r\n    const finalDateArray = finalFilter.split('/');\r\n    const initialDate = new Date(initialDateArray[1], parseInt(initialDateArray[0]) - 1, 1);\r\n    let finalDate = new Date(finalDateArray[1], parseInt(finalDateArray[0]) - 1);\r\n    finalDate.setMonth(finalDate.getMonth() + 1);\r\n    finalDate.setDate(finalDate.getDate() - 1);\r\n\r\n    getPieChartInfos(initialDate, finalDate);\r\n    getCardsInfos(initialDate, finalDate);\r\n    getBarChartInfos(initialDate, finalDate);\r\n    getMetrics(initialDate, finalDate);\r\n  }, [initialFilter, finalFilter, category]);\r\n\r\n  useEffect(() => {\r\n    selectedProduct && setSelectedProduct(null);\r\n    setSearchResult(() =>\r\n      search\r\n        ? products.filter(product => product.descricao_produto.includes(search.toUpperCase()))\r\n        : []\r\n    )\r\n  }, [search]);\r\n\r\n  return (\r\n    <DashboardWrapper>\r\n      <DashboardHeader>\r\n        <div>\r\n          <h1>Olá, {session.name} {session.last_name}</h1>\r\n          <small>Bem vindo(a) de volta!</small>\r\n        </div>\r\n        <img src={user.avatar} alt={session.name} />\r\n      </DashboardHeader>\r\n\r\n      \r\n      <CardsArea>\r\n        <div className=\"cards\" >\r\n          <div>\r\n          <iframe  width=\"120%\" frameborder = \"0\" margin-left=\"-2.5px\" height=\"800px\" src=\"https://brurei-cd2-ai-internal.hf.space/?__theme=dark&__sign=eyJhbGciOiJFZERTQSJ9.eyJzdWIiOiJicnVyZWkvY2QyLWFpLWludGVybmFsIiwiZXhwIjoxNjgyNDUyMzgxLCJpc3MiOiJodWdnaW5nZmFjZS1tb29uIn0.clEm5YVAfdiBRuz7S6w7WOPo5PN0I44-5Mzj8NgQwh4qGLgkfQJ3T1B1mMOgmBp8DSQliT2626ueGd_n1WWdAg\" ></iframe>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </CardsArea>\r\n\r\n         </DashboardWrapper>\r\n  )\r\n}\r\n"],"mappings":"oRAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE9D,OACEC,SAAS,CACTC,SAAS,CACTC,mBAAmB,CACnBC,eAAe,CACfC,gBAAgB,CAChBC,cAAc,KACT,UAAU,CAEjB,OAASC,aAAa,KAAQ,uBAAuB,CAErD,MAAOC,KAAI,KAAM,mBAAmB,CACpC,MAAOC,cAAa,KAAM,gCAAgC,CAC1D,MAAOC,0BAAyB,KAAM,wCAAwC,CAC9E,MAAOC,UAAS,KAAM,uBAAuB,CAC7C,MAAOC,SAAQ,KAAM,uBAAuB,CAE5C,MAAOC,WAAU,KAAM,+BAA+B,CAAC,wFAEvD,cAAe,SAASC,UAAS,EAAG,CAClC,gBAA0DhB,UAAU,CAACS,aAAa,CAAC,CAA3EQ,IAAI,aAAJA,IAAI,CAAEC,OAAO,aAAPA,OAAO,CAAEC,QAAQ,aAARA,QAAQ,CAAEC,QAAQ,aAARA,QAAQ,CAAEC,UAAU,aAAVA,UAAU,CACrD,GAAMC,MAAK,CAAG,GAAIC,KAAI,EAAE,CACxB,cAAwCrB,QAAQ,CAAC,EAAE,CAAC,wCAA7CsB,YAAY,eAAEC,eAAe,eACpC,eAAgCvB,QAAQ,CAAC,WAAW,CAAC,yCAA9CwB,QAAQ,eAAEC,WAAW,eAC5B,eAA8BzB,QAAQ,CAAC,CACrC0B,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,EAAE,CACbC,IAAI,CAAE,GAAG,CACTC,aAAa,CAAE,EACjB,CAAC,CAAC,yCALKC,OAAO,eAAEC,UAAU,eAM1B,eAA4C/B,QAAQ,CAAC,CACnD0B,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,EAAE,CACbC,IAAI,CAAE,GACR,CAAC,CAAC,yCAJKI,cAAc,eAAEC,iBAAiB,eAKxC,eAA8BjC,QAAQ,CAAC,CACrC0B,SAAS,CAAE,EAAE,CACbC,SAAS,CAAE,EAAE,CACbC,IAAI,CAAE,GACR,CAAC,CAAC,0CAJKM,OAAO,gBAAEC,UAAU,gBAK1B,gBAAwCnC,QAAQ,CAAC,CAC/C,CAAC,UAAU,CAAE,QAAQ,CAAC,CACtB,CAAC,OAAO,CAAE,CAAC,CAAC,CACZ,CAAC,SAAS,CAAE,CAAC,CAAE,CACf,CAAC,WAAW,CAAE,CAAC,CAAC,CACjB,CAAC,2CALKoC,YAAY,gBAAEC,eAAe,gBAMpC,gBAAwCrC,QAAQ,CAAC,CAC/C,CAAC,EAAE,CAAE,qBAAqB,CAAE,mBAAmB,CAAC,CAChD,CAAC,KAAK,CAAE,CAAC,CAAE,CAAC,CAAC,CACb,CAAC,KAAK,CAAE,CAAC,CAAE,CAAC,CAAC,CACb,CAAC,KAAK,CAAE,CAAC,CAAE,CAAC,CAAC,CACb,CAAC,KAAK,CAAE,CAAC,CAAE,CAAC,CAAC,CACb,CAAC,KAAK,CAAE,CAAC,CAAE,CAAC,CAAC,CACb,CAAC,KAAK,CAAE,CAAC,CAAE,CAAC,CAAC,CACd,CAAC,2CARKsC,YAAY,gBAAEC,eAAe,gBASpC,gBAA0BvC,QAAQ,CAAC,EAAE,CAAC,2CAA/BwC,KAAK,gBAAEC,QAAQ,gBACtB,gBAA0CzC,QAAQ,CAAC,EAAE,CAAC,2CAA/C0C,aAAa,gBAAEC,gBAAgB,gBACtC,gBAAsC3C,QAAQ,CAAC,EAAE,CAAC,2CAA3C4C,WAAW,gBAAEC,cAAc,gBAClC,gBAA4B7C,QAAQ,CAAC,EAAE,CAAC,2CAAjC8C,MAAM,gBAAEC,SAAS,gBACxB,gBAAwC/C,QAAQ,CAAC,EAAE,CAAC,2CAA7CgD,YAAY,gBAAEC,eAAe,gBACpC,gBAA8CjD,QAAQ,CAAC,IAAI,CAAC,2CAArDkD,eAAe,gBAAEC,kBAAkB,gBAE1C,GAAMC,cAAa,CAAG,CAAC,WAAW,CAAE,SAAS,CAAE,kBAAkB,CAAE,gBAAgB,CAAC,CACpF,GAAMC,kBAAiB,EAAI,WAAW,4BAAKlC,UAAU,EAAC,CAEtD,gBAAsCnB,QAAQ,CAAC,EAAE,CAAC,2CAA3CsD,WAAW,gBAAEC,cAAc,gBAElC,QAASC,cAAa,CAACC,WAAW,CAAEC,SAAS,CAAE,CAC7C,GAAI1B,eAAc,CAAG,EAAE,CACvB,GAAI2B,wBAAuB,CAAG,EAAE,CAChC,GAAIzB,QAAO,CAAG,EAAE,CAChB,GAAI0B,iBAAgB,CAAG,EAAE,CACzB,GAAIC,iBAAgB,CAAG,EAAE,CACzB,GAAIC,0BAAyB,CAAG,EAAE,CAClC,GAAMC,cAAa,CAAG,GAAI1C,KAAI,EAAE,CAAC2C,OAAO,CAAC,CAAC,CAAC,CAC3C,GAAIC,kBAAiB,CAAGhD,QAAQ,CAACiD,MAAM,CAAC,SAAAC,OAAO,QAC7C,IAAI9C,KAAI,CAAC8C,OAAO,CAACC,UAAU,CAAC,CAACC,OAAO,EAAE,CAAGN,aAAa,GACvD,CAED,GAAIN,WAAW,EAAIC,SAAS,CAAE,CAC5BG,gBAAgB,CAAG5C,QAAQ,CAACiD,MAAM,CAAC,SAAAC,OAAO,CAAI,CAC5C,GAAMG,QAAO,CAAG,GAAIjD,KAAI,CAAC8C,OAAO,CAACC,UAAU,CAAC,CAACC,OAAO,EAAE,CACtD,GAAME,QAAO,CAAG,GAAIlD,KAAI,CAAC8C,OAAO,CAACK,UAAU,CAAC,CAACH,OAAO,EAAE,CACtD,GAAMI,MAAK,CAAGF,OAAO,EAAID,OAAO,CAChC,MACEG,MAAK,EAAIhB,WAAW,CAACY,OAAO,EAAE,EAC9BI,KAAK,EAAIf,SAAS,CAACW,OAAO,EAAE,CAEhC,CAAC,CAAC,CAEFP,yBAAyB,CAAG7C,QAAQ,CAACiD,MAAM,CAAC,SAAAC,OAAO,CAAI,CACrD,GAAMG,QAAO,CAAG,GAAIjD,KAAI,CAAC8C,OAAO,CAACC,UAAU,CAAC,CAACC,OAAO,EAAE,CACtD,GAAME,QAAO,CAAG,GAAIlD,KAAI,CAAC8C,OAAO,CAACK,UAAU,CAAC,CAACH,OAAO,EAAE,CACtD,GAAMI,MAAK,CAAGF,OAAO,EAAID,OAAO,CAChCZ,SAAS,CAACM,OAAO,CAAC,CAAC,CAAC,CACpB,MACES,MAAK,EAAIhB,WAAW,CAACY,OAAO,EAAE,EAC9BI,KAAK,CAAGf,SAAS,CAACW,OAAO,EAAE,CAE/B,CAAC,CAAC,CAEFtC,UAAU,CAAC,iBAAO,CAChBL,SAAS,CAAEmC,gBAAgB,CAC3BlC,SAAS,CAAEmC,yBAAyB,CACpClC,IAAI,CAAE,CAACiC,gBAAgB,CAACa,MAAM,CAAGZ,yBAAyB,CAACY,MAAM,EAAIZ,yBAAyB,CAACY,MAAM,CAAG,GAC1G,CAAC,EAAC,CAAC,CAGHhB,SAAS,CAACiB,QAAQ,CAACjB,SAAS,CAACkB,QAAQ,EAAE,CAAG,CAAC,CAAC,CAC5ClB,SAAS,CAACM,OAAO,CAACN,SAAS,CAACmB,OAAO,EAAE,CAAG,CAAC,CAAC,CAE1C5D,QAAQ,CAAC6D,OAAO,CAAC,SAAAX,OAAO,CAAI,CAC1B,GAAQY,wBAAuB,CAA2BZ,OAAO,CAAzDY,uBAAuB,CAAEC,QAAQ,CAAiBb,OAAO,CAAhCa,QAAQ,CAAEZ,UAAU,CAAKD,OAAO,CAAtBC,UAAU,CAErD,GAAMa,YAAW,CAAGjD,cAAc,CAACkD,IAAI,CAAC,SAAAf,OAAO,QAC7CA,QAAO,CAACY,uBAAuB,GAAKA,uBAAuB,GAC5D,CACD,GAAMI,WAAU,CAAGnD,cAAc,CAACkD,IAAI,CAAC,SAAAf,OAAO,QAC5CA,QAAO,CAACa,QAAQ,GAAKA,QAAQ,GAC9B,CAED,GAAMI,UAAS,CAAG,GAAI/D,KAAI,CAAC+C,UAAU,CAAC,EAAIX,WAAW,CAACY,OAAO,EAAE,EAAI,GAAIhD,KAAI,CAAC+C,UAAU,CAAC,EAAIV,SAAS,CAACW,OAAO,EAAE,CAC9G,GAAI,CAACY,WAAW,EAAIG,SAAS,CAAE,CAC7BpD,cAAc,CAACqD,IAAI,CAAClB,OAAO,CAAC,CAC9B,CAAC,IAAM,CACP,CACA,GAAI,CAACgB,UAAU,EAAIC,SAAS,CAAE,CAC5BlD,OAAO,CAACmD,IAAI,CAACL,QAAQ,CAAC,CACxB,CACF,CAAC,CAAC,CAEFf,iBAAiB,CAACa,OAAO,CAAC,SAAAX,OAAO,CAAI,CACnC,GAAQY,wBAAuB,CAA2BZ,OAAO,CAAzDY,uBAAuB,CAAEC,QAAQ,CAAiBb,OAAO,CAAhCa,QAAQ,CAAEZ,UAAU,CAAKD,OAAO,CAAtBC,UAAU,CACrD,GAAMkB,cAAa,CAAG3B,uBAAuB,CAACuB,IAAI,CAAC,SAAAf,OAAO,QACxDA,QAAO,CAACY,uBAAuB,GAAKA,uBAAuB,GAC5D,CACD,GAAMI,WAAU,CAAGxB,uBAAuB,CAACuB,IAAI,CAAC,SAAAf,OAAO,QACrDA,QAAO,CAACa,QAAQ,GAAKA,QAAQ,GAC9B,CACDtB,SAAS,CAACM,OAAO,CAAC,CAAC,CAAC,CACpB,GAAMoB,UAAS,CAAG,GAAI/D,KAAI,CAAC+C,UAAU,CAAC,EAAIX,WAAW,CAACY,OAAO,EAAE,EAAI,GAAIhD,KAAI,CAAC+C,UAAU,CAAC,CAAGV,SAAS,CAACW,OAAO,EAAE,CAC7G,GAAI,CAACiB,aAAa,EAAIF,SAAS,CAAE,CAC/BzB,uBAAuB,CAAC0B,IAAI,CAAClB,OAAO,CAAC,CACvC,CACA,GAAI,CAACgB,UAAU,EAAIC,SAAS,CAAE,CAC5BxB,gBAAgB,CAACyB,IAAI,CAACL,QAAQ,CAAC,CACjC,CACF,CAAC,CAAC,CAEF7C,UAAU,CAAC,iBAAO,CAChBT,SAAS,CAAEQ,OAAO,CAClBP,SAAS,CAAEiC,gBAAgB,CAC3BhC,IAAI,CAAE,CAACM,OAAO,CAACwC,MAAM,CAAGd,gBAAgB,CAACc,MAAM,EAAId,gBAAgB,CAACc,MAAM,CAAG,GAC/E,CAAC,EAAC,CAAC,CAEHzC,iBAAiB,CAAC,iBAAO,CACvBP,SAAS,CAAEM,cAAc,CACzBL,SAAS,CAAEgC,uBAAuB,CAClC/B,IAAI,CAAE,CAACI,cAAc,CAAC0C,MAAM,CAAGf,uBAAuB,CAACe,MAAM,EAAIf,uBAAuB,CAACe,MAAM,CAAG,GACpG,CAAC,EAAC,CAAC,CACL,CAEA,GAAM5C,QAAO,CAAGb,QAAQ,CAACiD,MAAM,CAAC,SAAAC,OAAO,CAAI,CACzC,MAAO,IAAI9C,KAAI,CAAC8C,OAAO,CAACK,UAAU,CAAC,CAACe,kBAAkB,EAAE,GAAKnE,KAAK,CAACmE,kBAAkB,EAAE,CACzF,CAAC,CAAC,CACFhE,eAAe,CAACO,OAAO,CAAC,CAC1B,CAEA,QAAS0D,iBAAgB,CAAC/B,WAAW,CAAEC,SAAS,CAAE,CAChD,GAAI+B,OAAM,CAAG,EAAE,CACf,GAAIC,iBAAgB,CAAG,EAAE,CACzB;AAEA,GAAIC,YAAW,CAAG,GAAItE,KAAI,CAACoC,WAAW,CAAC,CACvC,MAAOkC,WAAW,EAAIjC,SAAS,CAAE,CAC/B,GAAMkC,MAAK,CAAGC,MAAM,CAACF,WAAW,CAACf,QAAQ,EAAE,CAAG,CAAC,CAAC,CAACkB,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CACjE,GAAMC,KAAI,CAAGJ,WAAW,CAACK,WAAW,EAAE,CACtC,GAAMC,WAAU,WAAML,KAAK,aAAIG,IAAI,CAAE,CACrC,GAAMG,UAAS,CAAG,GAAI7E,KAAI,CAACsE,WAAW,CAAC,CACvCF,MAAM,CAACJ,IAAI,CAAC,CAAEY,UAAU,CAAVA,UAAU,CAAEC,SAAS,CAATA,SAAU,CAAC,CAAC,CACtCP,WAAW,CAAChB,QAAQ,CAACgB,WAAW,CAACf,QAAQ,EAAE,CAAG,CAAC,CAAC,CAClD,CAEAlB,SAAS,CAACiB,QAAQ,CAACjB,SAAS,CAACkB,QAAQ,EAAE,CAAG,CAAC,CAAC,CAC5ClB,SAAS,CAACM,OAAO,CAACN,SAAS,CAACmB,OAAO,EAAE,CAAG,CAAC,CAAC,CAE1C,GAAMsB,SAAQ,CAAGV,MAAM,CAACW,GAAG,CAAC,SAAAR,KAAK,CAAI,CACnCF,gBAAgB,CAAGzE,QAAQ,CAACiD,MAAM,CAAC,SAAAC,OAAO,CAAI,CAC5C,GAAMkC,KAAI,CAAG,GAAIhF,KAAI,CAAC8C,OAAO,CAACC,UAAU,CAAC,CAACC,OAAO,EAAE,CACnD,GAAIiC,WAAU,CAAG,GAAIjF,KAAI,CAACuE,KAAK,CAACM,SAAS,CAAC,CAC1CI,UAAU,CAAC3B,QAAQ,CAACiB,KAAK,CAACM,SAAS,CAACtB,QAAQ,EAAE,CAAG,CAAC,CAAC,CAEnD,GAAIpD,QAAQ,GAAK,WAAW,CAAE,CAC5B,MACE6E,KAAI,EAAIT,KAAK,CAACM,SAAS,CAAC7B,OAAO,EAAE,EACjCgC,IAAI,CAAGC,UAAU,CAACjC,OAAO,EAAE,CAE/B,CAAC,IAAM,CACL,MACE7C,SAAQ,GAAK2C,OAAO,CAACoC,SAAS,EAC9BF,IAAI,EAAIT,KAAK,CAACM,SAAS,CAAC7B,OAAO,EAAE,EACjCgC,IAAI,CAAGC,UAAU,CAACjC,OAAO,EAAE,CAE/B,CACF,CAAC,CAAC,CACF,MAAQ,CACNuB,KAAK,CAALA,KAAK,CACLY,KAAK,CAAEd,gBACT,CAAC,CACH,CAAC,CAAC,CACF,GAAMe,KAAI,CAAGN,QAAQ,CAACC,GAAG,CAAC,SAAAM,OAAO,CAAI,CACnC,GAAIC,MAAK,CAAG,CAAC,CACb,GAAIC,KAAI,CAAG,CAAC,CACZF,OAAO,CAACF,KAAK,CAAC1B,OAAO,CAAC,SAAAX,OAAO,CAAI,CAC/BwC,KAAK,CAAGA,KAAK,CAAGE,QAAQ,CAAC1C,OAAO,CAAC2C,cAAc,CAAC,CAChDF,IAAI,CAAGA,IAAI,CAAGC,QAAQ,CAAC1C,OAAO,CAAC4C,aAAa,CAAC,CAC/C,CAAC,CAAC,CACF,MAAQ,CACNL,OAAO,CAACd,KAAK,CAACK,UAAU,CACxBU,KAAK,CACLC,IAAI,CACL,CAEH,CAAC,CAAC,CACFrE,eAAe,EACb,CAAC,EAAE,CAAE,qBAAqB,CAAE,mBAAmB,CAAC,4BAC7CkE,IAAI,GACP,CACJ,CAEA,QAASO,iBAAgB,CAACvD,WAAW,CAAEC,SAAS,CAAE,CAChD,GAAM+C,KAAI,CAAGvF,QAAQ,CAACkF,GAAG,CAAC,SAAAa,OAAO,CAAI,CACnC,GAAIC,MAAK,CAAG,CAAC,CACb,GAAMC,gBAAe,CAAGlG,QAAQ,CAACiD,MAAM,CAAC,SAAAC,OAAO,CAAI,CACjD,GAAMkC,KAAI,CAAG,GAAIhF,KAAI,CAAC8C,OAAO,CAACC,UAAU,CAAC,CAACC,OAAO,EAAE,CACnD,GAAIZ,WAAW,EAAIC,SAAS,CAAE,CAC5B,GAAIlC,QAAQ,GAAK,WAAW,CAAE,CAC5B,MACE2C,QAAO,CAACa,QAAQ,GAAKiC,OAAO,EAC5BZ,IAAI,EAAI5C,WAAW,CAACY,OAAO,EAAE,EAC7BgC,IAAI,EAAI3C,SAAS,CAACW,OAAO,EAAE,CAE/B,CAAC,IAAM,CACL,MACE7C,SAAQ,GAAK2C,OAAO,CAACoC,SAAS,EAC9BpC,OAAO,CAACa,QAAQ,GAAKiC,OAAO,EAC5BZ,IAAI,EAAI5C,WAAW,CAACY,OAAO,EAAE,EAC7BgC,IAAI,EAAI3C,SAAS,CAACW,OAAO,EAAE,CAE/B,CAEF,CAAC,IAAM,CACL,MAAOF,QAAO,CAACa,QAAQ,GAAKiC,OAAO,CACrC,CACF,CAAC,CAAC,CACFE,eAAe,CAACrC,OAAO,CAAC,SAAAX,OAAO,CAAI,CACjC,GAAIA,OAAO,CAAC4C,aAAa,CAAE,CACzBG,KAAK,CAAGA,KAAK,CAAGL,QAAQ,CAAC1C,OAAO,CAAC4C,aAAa,CAAC,CACjD,CACF,CAAC,CAAC,CACF,MAAO,CAACE,OAAO,CAAEC,KAAK,CAAC,CACzB,CAAC,CAAC,CACF7E,eAAe,EACb,CAAC,UAAU,CAAE,UAAU,CAAC,4BACrBoE,IAAI,GACP,CACJ,CAEA,QAASW,aAAY,EAAG,CACtBjE,kBAAkB,CAAC,iBACjBlC,SAAQ,CAACoG,IAAI,CAAC,SAAAlD,OAAO,QAAIA,QAAO,CAACmD,iBAAiB,GAAKxE,MAAM,GAAC,GAC/D,CACD,GAAMyE,iBAAgB,CAAG7E,aAAa,CAAC8E,KAAK,CAAC,GAAG,CAAC,CACjD,GAAMC,eAAc,CAAG7E,WAAW,CAAC4E,KAAK,CAAC,GAAG,CAAC,CAC7C,GAAM/D,YAAW,CAAG,GAAIpC,KAAI,CAACkG,gBAAgB,CAAC,CAAC,CAAC,CAAEV,QAAQ,CAACU,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAG,CAAC,CAAE,CAAC,CAAC,CACvF,GAAI7D,UAAS,CAAG,GAAIrC,KAAI,CAACoG,cAAc,CAAC,CAAC,CAAC,CAAEZ,QAAQ,CAACY,cAAc,CAAC,CAAC,CAAC,CAAC,CAAG,CAAC,CAAC,CAC5E/D,SAAS,CAACiB,QAAQ,CAACjB,SAAS,CAACkB,QAAQ,EAAE,CAAG,CAAC,CAAC,CAC5ClB,SAAS,CAACM,OAAO,CAACN,SAAS,CAACmB,OAAO,EAAE,CAAG,CAAC,CAAC,CAE1CW,gBAAgB,CAAC/B,WAAW,CAAEC,SAAS,CAAC,CAC1C,CAEA,QAASgE,WAAU,CAACjE,WAAW,CAAEC,SAAS,CAAE,CAC1C,GAAMiE,QAAO,CAAGzG,QAAQ,CAACkF,GAAG,CAAC,SAAAa,OAAO,CAAI,CACtC,GAAMd,SAAQ,CAAGlF,QAAQ,CAACiD,MAAM,CAAC,SAAAC,OAAO,CAAI,CAC1C,GAAQoC,UAAS,CAAuCpC,OAAO,CAAvDoC,SAAS,CAAEnC,UAAU,CAA2BD,OAAO,CAA5CC,UAAU,CAAEI,UAAU,CAAeL,OAAO,CAAhCK,UAAU,CAAEQ,QAAQ,CAAKb,OAAO,CAApBa,QAAQ,CACnD,GAAMV,QAAO,CAAG,GAAIjD,KAAI,CAAC+C,UAAU,CAAC,CAACC,OAAO,EAAE,CAC9C,GAAME,QAAO,CAAG,GAAIlD,KAAI,CAACmD,UAAU,CAAC,CAACH,OAAO,EAAE,CAC9C,GAAMI,MAAK,CAAGF,OAAO,EAAID,OAAO,CAChC,GAAI9C,QAAQ,GAAK,WAAW,CAAE,CAC5B,MACEyF,QAAO,GAAKjC,QAAQ,EACpBP,KAAK,EAAIhB,WAAW,CAACY,OAAO,EAAE,EAC9BI,KAAK,EAAIf,SAAS,CAACW,OAAO,EAAE,CAEhC,CAAC,IAAM,CACL,MACE7C,SAAQ,GAAK+E,SAAS,EACtBU,OAAO,GAAKjC,QAAQ,EACpBP,KAAK,EAAIhB,WAAW,CAACY,OAAO,EAAE,EAC9BI,KAAK,EAAIf,SAAS,CAACW,OAAO,EAAE,CAEhC,CACF,CAAC,CAAC,CACF,GAAIoB,OAAM,CAAG,CAACwB,OAAO,CAAC,CACtB,GAAIW,MAAK,CAAG,CAAC,CACb,GAAIC,eAAc,CAAG,CAAC,CACtB,GAAIC,YAAW,CAAG,CAAC,CACnB3B,QAAQ,CAACrB,OAAO,CAAC,SAAAX,OAAO,CAAI,CAC1B,GAAQ2C,eAAc,CAAqC3C,OAAO,CAA1D2C,cAAc,CAAEC,aAAa,CAAsB5C,OAAO,CAA1C4C,aAAa,CAAEgB,eAAe,CAAK5D,OAAO,CAA3B4D,eAAe,CACtD,GAAIA,eAAe,CAAE,CACnBH,KAAK,CAAGA,KAAK,CAAGI,IAAI,CAACC,KAAK,CAACC,MAAM,CAACH,eAAe,CAAC,CAAC,CACrD,CACA,GAAIjB,cAAc,CAAE,CAClBgB,WAAW,CAAGA,WAAW,CAAGE,IAAI,CAACC,KAAK,CAACC,MAAM,CAACpB,cAAc,CAAC,CAAC,CAChE,CACA,GAAIC,aAAa,CAAE,CACjBc,cAAc,CAAGA,cAAc,CAAGG,IAAI,CAACC,KAAK,CAACC,MAAM,CAACnB,aAAa,CAAC,CAAC,CACrE,CACF,CAAC,CAAC,CACFtB,MAAM,CAACJ,IAAI,CAACuC,KAAK,CAAG,MAAM,CAAEE,WAAW,CAAG,MAAM,CAAED,cAAc,CAAG,MAAM,CAAC,CAC1E,MAAOpC,OAAM,CACf,CAAC,CAAC,CACFlC,cAAc,CAACoE,OAAO,CAAC,CACzB,CAEA5H,SAAS,CAAC,UAAM,CACd0C,QAAQ,CAAC,UAAM,CACb,GAAI0F,OAAM,CAAG,EAAE,CACfA,MAAM,CAAC9C,IAAI,WAAI,CAACjE,KAAK,CAACwD,QAAQ,EAAE,CAAG,CAAC,EAAEwD,QAAQ,EAAE,CAACtC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,aAAI1E,KAAK,CAAC4E,WAAW,EAAE,EAAG,CAC3F,IAAK,GAAIqC,EAAC,CAAG,CAAC,CAAEA,CAAC,EAAI,CAAC,CAAEA,CAAC,EAAE,CAAE,CAC3B,GAAMC,SAAQ,CAAG,GAAIjH,KAAI,EAAE,CAC3BiH,QAAQ,CAAC3D,QAAQ,CAACvD,KAAK,CAACwD,QAAQ,EAAE,CAAGyD,CAAC,CAAC,CACvCF,MAAM,CAAC9C,IAAI,WAAI,CAACiD,QAAQ,CAAC1D,QAAQ,EAAE,CAAG,CAAC,EAAEwD,QAAQ,EAAE,CAACtC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,aAAIwC,QAAQ,CAACtC,WAAW,EAAE,EAAG,CACnG,CACArD,gBAAgB,CAACwF,MAAM,CAAC,CAAC,CAAC,CAAC,CAC3BtF,cAAc,CAACsF,MAAM,CAAC,CAAC,CAAC,CAAC,CACzB,MAAOA,OAAM,CACf,CAAC,CAAC,CACF;AACA;AACA;AACF,CAAC,CAAE,EAAE,CAAC,CAENpI,SAAS,CAAC,UAAM,CACd,GAAMwH,iBAAgB,CAAG7E,aAAa,CAAC8E,KAAK,CAAC,GAAG,CAAC,CACjD,GAAMC,eAAc,CAAG7E,WAAW,CAAC4E,KAAK,CAAC,GAAG,CAAC,CAC7C,GAAM/D,YAAW,CAAG,GAAIpC,KAAI,CAACkG,gBAAgB,CAAC,CAAC,CAAC,CAAEV,QAAQ,CAACU,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAG,CAAC,CAAE,CAAC,CAAC,CACvF,GAAI7D,UAAS,CAAG,GAAIrC,KAAI,CAACoG,cAAc,CAAC,CAAC,CAAC,CAAEZ,QAAQ,CAACY,cAAc,CAAC,CAAC,CAAC,CAAC,CAAG,CAAC,CAAC,CAC5E/D,SAAS,CAACiB,QAAQ,CAACjB,SAAS,CAACkB,QAAQ,EAAE,CAAG,CAAC,CAAC,CAC5ClB,SAAS,CAACM,OAAO,CAACN,SAAS,CAACmB,OAAO,EAAE,CAAG,CAAC,CAAC,CAE1CmC,gBAAgB,CAACvD,WAAW,CAAEC,SAAS,CAAC,CACxCF,aAAa,CAACC,WAAW,CAAEC,SAAS,CAAC,CACrC8B,gBAAgB,CAAC/B,WAAW,CAAEC,SAAS,CAAC,CACxCgE,UAAU,CAACjE,WAAW,CAAEC,SAAS,CAAC,CACpC,CAAC,CAAE,CAAChB,aAAa,CAAEE,WAAW,CAAEpB,QAAQ,CAAC,CAAC,CAE1CzB,SAAS,CAAC,UAAM,CACdmD,eAAe,EAAIC,kBAAkB,CAAC,IAAI,CAAC,CAC3CF,eAAe,CAAC,iBACdH,OAAM,CACF7B,QAAQ,CAACiD,MAAM,CAAC,SAAAC,OAAO,QAAIA,QAAO,CAACmD,iBAAiB,CAACiB,QAAQ,CAACzF,MAAM,CAAC0F,WAAW,EAAE,CAAC,GAAC,CACpF,EAAE,GACP,CACH,CAAC,CAAE,CAAC1F,MAAM,CAAC,CAAC,CAEZ,mBACE,MAAC,gBAAgB,yBACf,MAAC,eAAe,yBACd,oCACE,sBAAI,UAAK,CAAC9B,OAAO,CAACyH,IAAI,CAAC,GAAC,CAACzH,OAAO,CAAC0H,SAAS,GAAM,cAChD,uBAAO,wBAAsB,EAAQ,GACjC,cACN,YAAK,GAAG,CAAE3H,IAAI,CAAC4H,MAAO,CAAC,GAAG,CAAE3H,OAAO,CAACyH,IAAK,EAAG,GAC5B,cAGlB,KAAC,SAAS,wBACR,YAAK,SAAS,CAAC,OAAO,uBACpB,kCACA,eAAS,KAAK,CAAC,MAAM,CAAC,WAAW,CAAG,GAAG,CAAC,cAAY,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,8QAA8Q,EAAW,EAEnW,EAEF,EAEI,GAEU,CAE5B"},"metadata":{},"sourceType":"module","externalDependencies":[]}