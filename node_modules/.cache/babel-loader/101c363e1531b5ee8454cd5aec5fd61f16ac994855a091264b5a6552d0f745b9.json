{"ast":null,"code":"import _objectSpread from\"C:/Users/Rox/Documents/GitHub/gpt-test-steticLay/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Rox/Documents/GitHub/gpt-test-steticLay/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{LoginLeftWrapper,LoginRightWrapper}from\"./styles\";import Logo from'../../assets/logo.png';import LogoMobile from'../../assets/logoMobile.png';import MailIcon from'../../assets/icons/mail.png';import VisibilityIcon from'../../assets/icons/visibility.png';import VisibilityOffIcon from'../../assets/icons/visibility_off.png';import LockIcon from'../../assets/icons/lock.png';import InputWithIcon from\"../../components/InputWithIcon\";import Button from\"../../components/Button\";import{getAllProducts,getUsers,login}from\"../../services/api\";import{GlobalContext}from'../../contexts/global';import Loading from\"../../components/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showPassword=_useState8[0],setShowPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];var _useContext=useContext(GlobalContext),setProducts=_useContext.setProducts,setSession=_useContext.setSession,setCategories=_useContext.setCategories,setPartners=_useContext.setPartners,setUsers=_useContext.setUsers;var navigate=useNavigate();function handleChangeVisibility(){setShowPassword(!showPassword);}function handleSubmit(e){e.preventDefault();if(!email||!password){setError('Preencha os campos corretamente');}else{setIsLoading(true);login({email:email,password:password}).then(function(data){setSession(_objectSpread({email:email,password:password},data));getAllProducts().then(function(products){setIsLoading(false);setProducts(products);var categories=[];var partners=[];products.forEach(function(product){if(!categories.some(function(category){return category===product.categoria;})){categories.push(product.categoria);}if(!partners.some(function(partner){return partner===product.parceiro;})){partners.push(product.parceiro);}});setCategories(categories);setPartners(partners);data.first_acess?navigate('/primeiro-acesso'):navigate('/assistente-virtual');});getUsers().then(function(users){return setUsers(users);});}).catch(function(error){console.log(error);setIsLoading(false);if(error.code===\"ERR_NETWORK\"){setError('Erro Interno. Entre em contato com o suporte.');}else{setError('Verifique as credenciais!');}});}}useEffect(function(){setError('');},[email,password]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(LoginLeftWrapper,{children:[/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"domazzi\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Bem vindo(a) ao \",/*#__PURE__*/_jsx(\"br\",{}),\" Esteticista Virtual Laissa Pacheco.\"]})]}),/*#__PURE__*/_jsxs(LoginRightWrapper,{children:[/*#__PURE__*/_jsx(\"img\",{src:LogoMobile,alt:\"domazzi\"}),/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Saiba tudo sobre procedimentos, pre\\xE7os, pr\\xE9 e p\\xF3s operat\\xF3rios\",/*#__PURE__*/_jsx(\"br\",{}),\" Esteticista Virtual Laissa Pacheco\"]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(InputWithIcon,{placeholder:\"Insira seu e-mail\",type:\"email\",value:email,setValue:setEmail,left:{src:MailIcon}}),/*#__PURE__*/_jsx(InputWithIcon,{placeholder:\"Insira sua senha\",value:password,setValue:setPassword,left:{src:LockIcon},right:{src:showPassword?VisibilityOffIcon:VisibilityIcon,onClick:handleChangeVisibility},type:showPassword?'text':'password'}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(Link,{to:\"/nova-senha\",children:\"Esqueceu a senha?\"}),/*#__PURE__*/_jsx(Button,{color:\"branding\",text:\"Acessar\"})]}),/*#__PURE__*/_jsx(Loading,{isLoading:isLoading})]})]});}","map":{"version":3,"names":["useContext","useEffect","useState","Link","useNavigate","LoginLeftWrapper","LoginRightWrapper","Logo","LogoMobile","MailIcon","VisibilityIcon","VisibilityOffIcon","LockIcon","InputWithIcon","Button","getAllProducts","getUsers","login","GlobalContext","Loading","Login","email","setEmail","password","setPassword","error","setError","showPassword","setShowPassword","isLoading","setIsLoading","setProducts","setSession","setCategories","setPartners","setUsers","navigate","handleChangeVisibility","handleSubmit","e","preventDefault","then","data","products","categories","partners","forEach","product","some","category","categoria","push","partner","parceiro","first_acess","users","catch","console","log","code","src","onClick"],"sources":["C:/Users/Rox/Documents/GitHub/gpt-test-steticLay/src/pages/Login/index.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { LoginLeftWrapper, LoginRightWrapper } from \"./styles\";\r\n\r\nimport Logo from '../../assets/logo.png';\r\nimport LogoMobile from '../../assets/logoMobile.png';\r\nimport MailIcon from '../../assets/icons/mail.png';\r\nimport VisibilityIcon from '../../assets/icons/visibility.png';\r\nimport VisibilityOffIcon from '../../assets/icons/visibility_off.png';\r\nimport LockIcon from '../../assets/icons/lock.png';\r\nimport InputWithIcon from \"../../components/InputWithIcon\";\r\nimport Button from \"../../components/Button\";\r\nimport { getAllProducts, getUsers, login } from \"../../services/api\";\r\nimport { GlobalContext } from '../../contexts/global';\r\nimport Loading from \"../../components/Loading\";\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const {\r\n    setProducts,\r\n    setSession,\r\n    setCategories,\r\n    setPartners,\r\n    setUsers\r\n  } = useContext(GlobalContext);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  function handleChangeVisibility() {\r\n    setShowPassword(!showPassword);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    if (!email || !password) {\r\n      setError('Preencha os campos corretamente');\r\n    } else {\r\n      setIsLoading(true);\r\n\r\n      login({\r\n        email,\r\n        password\r\n      }).then((data) => {\r\n        setSession({\r\n          email, password,\r\n          ...data\r\n        });\r\n\r\n        getAllProducts().then(products => {\r\n          setIsLoading(false);\r\n          setProducts(products);\r\n\r\n          let categories = [];\r\n          let partners = [];\r\n\r\n          products.forEach(product => {\r\n            if (!categories.some(category => category === product.categoria)) {\r\n              categories.push(product.categoria);\r\n            }\r\n            if (!partners.some(partner => partner === product.parceiro)) {\r\n              partners.push(product.parceiro);\r\n            }\r\n          });\r\n\r\n          setCategories(categories);\r\n          setPartners(partners);\r\n\r\n          data.first_acess\r\n            ? navigate('/primeiro-acesso')\r\n            : navigate('/assistente-virtual');\r\n        });\r\n\r\n        getUsers().then(users => setUsers(users));\r\n      }).catch(error => {\r\n        console.log(error);\r\n        setIsLoading(false);\r\n\r\n        if(error.code === \"ERR_NETWORK\") {\r\n          setError('Erro Interno. Entre em contato com o suporte.');\r\n        } else {\r\n          setError('Verifique as credenciais!');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setError('');\r\n  }, [email, password])\r\n\r\n  return (\r\n    <>\r\n      <LoginLeftWrapper>\r\n        <img src={Logo} alt=\"domazzi\" />\r\n        <h2>Bem vindo(a) ao <br /> Esteticista Virtual Laissa Pacheco.</h2>\r\n      </LoginLeftWrapper>\r\n\r\n      <LoginRightWrapper>\r\n        <img src={LogoMobile} alt=\"domazzi\" />\r\n\r\n        <center>\r\n          <h3>Saiba tudo sobre procedimentos, preços, pré e pós operatórios<br /> Esteticista Virtual Laissa Pacheco</h3>\r\n        </center>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <InputWithIcon\r\n            placeholder=\"Insira seu e-mail\"\r\n            type=\"email\"\r\n            value={email} setValue={setEmail}\r\n            left={{ src: MailIcon }}\r\n          />\r\n\r\n          <InputWithIcon\r\n            placeholder=\"Insira sua senha\"\r\n            value={password} setValue={setPassword}\r\n            left={{ src: LockIcon, }}\r\n            right={{\r\n              src: showPassword ? VisibilityOffIcon : VisibilityIcon,\r\n              onClick: handleChangeVisibility\r\n            }}\r\n            type={showPassword ? 'text' : 'password'}\r\n          />\r\n\r\n          {error && <span className=\"error\">{error}</span>}\r\n\r\n          <Link to=\"/nova-senha\">Esqueceu a senha?</Link>\r\n          <Button color=\"branding\" text=\"Acessar\" />\r\n        </form>\r\n\r\n        <Loading isLoading={isLoading} />\r\n      </LoginRightWrapper>\r\n    </>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}